<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Metals+</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <!-- Copper -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Copper"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>0.75</TreeFellingSpeed>
                <PlantHarvestingSpeed>0.75</PlantHarvestingSpeed>
                <DiggingSpeed>0.83</DiggingSpeed>
                <MiningYieldDigging>0.9</MiningYieldDigging>
                <ConstructionSpeed>0.83</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.2</wearFactorMultiplier>
            </li>
          </value>
        </li>
        <!-- Tin -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Tin"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <DiggingSpeed>1.1</DiggingSpeed>
                <MiningYieldDigging>0.85</MiningYieldDigging>
                <ConstructionSpeed>1.1</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.25</wearFactorMultiplier>
            </li>
          </value>
        </li>
        <!-- Iron (add MiningYieldDigging for consistency) -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Iron"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>0.9</TreeFellingSpeed>
                <PlantHarvestingSpeed>0.9</PlantHarvestingSpeed>
                <DiggingSpeed>0.9</DiggingSpeed>
                <MiningYieldDigging>0.95</MiningYieldDigging>
                <ConstructionSpeed>0.9</ConstructionSpeed>
              </toolStatFactors>
            </li>
          </value>
        </li>
        <!-- Titanium (only add if no extension exists) -->
        <li Class="PatchOperationConditional">
          <xpath>Defs/ThingDef[defName="Titanium"]/modExtensions</xpath>
          <nomatch Class="PatchOperationAddModExtension">
            <xpath>Defs/ThingDef[defName="Titanium"]</xpath>
            <value>
              <li Class="SurvivalTools.StuffPropsTool">
                <toolStatFactors>
                  <TreeFellingSpeed>1.25</TreeFellingSpeed>
                  <PlantHarvestingSpeed>1.25</PlantHarvestingSpeed>
                  <DiggingSpeed>1.1</DiggingSpeed>
                  <ConstructionSpeed>1.1</ConstructionSpeed>
                </toolStatFactors>
                <wearFactorMultiplier>0.9</wearFactorMultiplier>
              </li>
            </value>
          </nomatch>
        </li>
        <!-- Bronze -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Bronze"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>0.85</TreeFellingSpeed>
                <PlantHarvestingSpeed>0.85</PlantHarvestingSpeed>
                <DiggingSpeed>0.8</DiggingSpeed>
                <MiningYieldDigging>0.9</MiningYieldDigging>
                <ConstructionSpeed>0.8</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.15</wearFactorMultiplier>
            </li>
          </value>
        </li>
      </operations>
    </match>
  </Operation>
</Patch>